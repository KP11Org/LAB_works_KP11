# **Лабораторная работа №5 (2 урока)**  
## **Тема: Агрегатные функции. COUNT, SUM, AVG, MIN, MAX**

---

### **1. Немного теории**

Когда нужно получить **обобщающую информацию** о данных (например, средний возраст студентов или количество преподавателей), используются **агрегатные функции**.

Они работают с группой строк и возвращают **одно значение**.

**Основные агрегатные функции в SQL:**
- `COUNT()` — количество строк (или непустых значений).
- `SUM()` — сумма значений в столбце.
- `AVG()` — среднее арифметическое.
- `MIN()` — минимальное значение.
- `MAX()` — максимальное значение.

Эти функции часто используются с `GROUP BY`, но в этой работе мы начнём с простых случаев — **по всей таблице**.

---

### **2. Практическая часть**

**Цель:** Научиться использовать агрегатные функции для анализа данных в таблицах `Students` и `Teachers`.

#### **Шаг 1: Подключение к базе данных**
1. Запустите **SQLite Studio**.
2. Откройте базу `students.db`.
3. Убедитесь, что таблицы `Students` и `Teachers` содержат данные.

#### **Шаг 2: Подсчёт количества записей (COUNT)**
1. Посчитаем, сколько всего студентов:
```sql
SELECT COUNT(*) FROM Students;
```
2. Результат — одно число: общее количество строк в таблице.

3. Можно дать результату имя (псевдоним) с помощью `AS`:
```sql
SELECT COUNT(*) AS total_students FROM Students;
```

#### **Шаг 3: Сумма значений (SUM)**
1. Найдём сумму возрастов всех студентов:
```sql
SELECT SUM(age) AS total_age FROM Students;
```
2. Полезно для дальнейших расчётов (например, среднего возраста).

#### **Шаг 4: Среднее значение (AVG)**
1. Вычислим средний возраст студентов:
```sql
SELECT AVG(age) AS average_age FROM Students;
```
2. Результат будет дробным числом (например, 20.5).

#### **Шаг 5: Минимальное и максимальное значение**
1. Найдём самого молодого студента:
```sql
SELECT MIN(age) AS min_age FROM Students;
```
2. Найдём самого старшего:
```sql
SELECT MAX(age) AS max_age FROM Students;
```
3. Можно объединить:
```sql
SELECT MIN(age) AS min_age, MAX(age) AS max_age FROM Students;
```

#### **Шаг 6: Комбинирование функций**
1. Получим сразу несколько показателей:
```sql
SELECT 
    COUNT(*) AS total,
    AVG(age) AS avg_age,
    MIN(age) AS min_age,
    MAX(age) AS max_age
FROM Students;
```
2. Удобно для быстрого анализа данных.

#### **Шаг 7: Работа с таблицей Teachers**
1. Посчитайте количество преподавателей:
```sql
SELECT COUNT(*) AS total_teachers FROM Teachers;
```
2. Найдите максимальный стаж:
```sql
SELECT MAX(experience) AS max_experience FROM Teachers;
```
3. Найдите средний стаж преподавателей:
```sql
SELECT AVG(experience) AS avg_experience FROM Teachers;
```

#### **Шаг 8: Использование WHERE с агрегатными функциями**
1. Посчитаем, сколько студентов учится в группе ИТ-101:
```sql
SELECT COUNT(*) AS it101_count FROM Students 
WHERE group_name = 'ИТ-101';
```
2. Найдём средний возраст студентов из группы ИТ-103:
```sql
SELECT AVG(age) AS avg_age_it103 FROM Students 
WHERE group_name = 'ИТ-103';
```

---

### **3. Самостоятельная часть**

> Выполняется самостоятельно.

1. Найдите **сумму стажа** всех преподавателей.

2. Определите, **сколько студентов старше 20 лет**.

3. Выведите **минимальный и максимальный возраст** среди студентов группы `ИТ-101` в одном запросе.

---

### **4. Контрольные вопросы**

1. Чем отличается `COUNT(*)` от `COUNT(имя_столбца)`?  
2. Можно ли использовать агрегатные функции без `FROM`? Почему?

> Ответы дайте устно при защите работы.

---

### **5. Слепая печать**

1. Перейдите на сайт [stamina-online](https://stamina-online.com/ru/programming)
2. Пройдите два урока по [языку программирования SQL](https://stamina-online.com/ru/workout/programming/18)

---

### **6. Критерии оценивания**

| Критерий                  | Оценка | Примечание |
|---------------------------|--------|------------|
| Практическая часть        | 3      | Все агрегатные функции использованы корректно |
| Слепая печать             | 4      | Работа выполнена |
| Самостоятельная часть     | 5      | Запросы составлены правильно, используются WHERE и функции, синтаксис соблюдён |

---

✅ **Готово!**  
Следующая лабораторная работа: **Группировка данных — GROUP BY и HAVING**.
