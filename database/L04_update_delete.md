# **Лабораторная работа №4 (2 урока)**  
## **Тема: Обновление и удаление данных. Команды UPDATE и DELETE**

---

### **1. Немного теории**

После создания, выборки и сортировки данных важно уметь **изменять** и **удалять** записи в базе данных.  
Для этого используются команды:

- `UPDATE` — изменяет существующие строки в таблице.
- `DELETE` — удаляет строки из таблицы.

⚠️ **Важно:** Эти команды **необратимы**! Особенно опасен `DELETE` без условия `WHERE`, так как он удалит **все строки**.

**Синтаксис:**
```sql
UPDATE имя_таблицы 
SET столбец = значение 
WHERE условие;
```

```sql
DELETE FROM имя_таблицы 
WHERE условие;
```

Если `WHERE` не указан, команда применится ко **всем строкам** таблицы!

---

### **2. Практическая часть**

**Цель:** Научиться безопасно изменять и удалять данные в таблицах `Students` и `Teachers`.

#### **Шаг 1: Подключение к базе данных**
1. Запустите **SQLite Studio**.
2. Откройте базу `students.db`.
3. Убедитесь, что таблицы `Students` и `Teachers` содержат данные.

#### **Шаг 2: Обновление одной записи (UPDATE)**
1. Изменим возраст студента по имени:
```sql
UPDATE Students 
SET age = 22 
WHERE name = 'Иван Петров';
```
2. Нажмите **"Execute"**.
3. Перейдите на вкладку **"Browse Data"** → обновите данные (кнопка "Reload") → проверьте, что возраст Ивана Петрова стал 22.

#### **Шаг 3: Обновление нескольких полей**
1. Изменим сразу имя и группу у студента:
```sql
UPDATE Students 
SET name = 'Иван Петров-младший', group_name = 'ИТ-103' 
WHERE name = 'Иван Петров-младший' OR id = 1;
```
> ⚠️ Опечатка? Да! Условие может не сработать. Лучше использовать `id` — он уникален.

2. Исправим: будем обновлять по `id`:
```sql
UPDATE Students 
SET name = 'Иван Петров-младший', group_name = 'ИТ-103' 
WHERE id = 1;
```
3. Выполните. Проверьте результат.

#### **Шаг 4: Обновление нескольких строк**
1. Увеличим возраст всех студентов из группы ИТ-101 на 1 год:
```sql
UPDATE Students 
SET age = age + 1 
WHERE group_name = 'ИТ-101';
```
2. Проверьте в **"Browse Data"** — у всех из ИТ-101 возраст должен увеличиться.

#### **Шаг 5: Удаление одной записи (DELETE)**
1. Удалим студента по `id`:
```sql
DELETE FROM Students 
WHERE id = 4;
```
2. Это удалит Елену Фролову (если она была добавлена).
3. Проверьте, что запись исчезла из таблицы.

#### **Шаг 6: Удаление с условием**
1. Удалим всех студентов, которым 19 лет:
```sql
DELETE FROM Students 
WHERE age = 19;
```
2. Будьте осторожны: если таких несколько — все будут удалены.

#### **Шаг 7: Опасный запрос — удаление всех данных**
1. **Не выполняйте этот запрос!** Пример опасности:
```sql
DELETE FROM Students;
```
— Удалит **все строки** из таблицы, но сама таблица останется.

2. Чтобы очистить таблицу полностью (и сбросить `id`), используется:
```sql
DELETE FROM Students;
-- или
DROP TABLE Students; -- удаляет всю таблицу!
```
> ⚠️ `DROP TABLE` удаляет таблицу целиком. Восстановить без резервной копии невозможно!

#### **Шаг 8: Проверка изменений**
1. Введите:
```sql
SELECT * FROM Students;
```
2. Убедитесь, что данные изменились корректно.

---

### **3. Самостоятельная часть**

> Выполняется самостоятельно.

1. Найдите преподавателя по имени (например, "Мария Соколова") и измените его стаж на 10 лет.

2. Увеличьте возраст всех студентов из группы `ИТ-103` на 1 год.

3. Удалите студента, у которого `id = 2` (или любой другой, если он существует). Убедитесь, что запись исчезла.

---

### **4. Контрольные вопросы**

1. Что произойдёт, если выполнить `UPDATE Students SET age = 25` без `WHERE`?  
2. Почему использование `id` в `WHERE` безопаснее, чем текстовое поле (например, `name`)?

> Ответы дайте устно при защите работы.

---

### **5. Слепая печать**

1. Перейдите на сайт [stamina-online](https://stamina-online.com/ru/programming)
2. Пройдите два урока по [языку программирования SQL](https://stamina-online.com/ru/workout/programming/18)

---

### **6. Критерии оценивания**

| Критерий                  | Оценка | Примечание |
|---------------------------|--------|------------|
| Практическая часть        | 3      | Все команды UPDATE и DELETE выполнены корректно, данные изменены |
| Слепая печать             | 4      | Работа выполнена |
| Самостоятельная часть     | 5      | Запросы составлены правильно, использованы id и условия, ошибок нет |
