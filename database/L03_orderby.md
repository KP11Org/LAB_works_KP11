# **Лабораторная работа №3 (2 урока)**  
## **Тема: Сортировка данных. ORDER BY. Ограничение результатов. LIMIT и OFFSET**

---

### **1. Немного теории**

После выборки и фильтрации данных часто возникает необходимость **упорядочить** результаты — например, от самых молодых к самым старшим или по алфавиту.  
Для этого используется команда `ORDER BY`.

Также бывает полезно **ограничить количество строк** в результате — например, показать только первых 3 студентов. Для этого служат операторы `LIMIT` и `OFFSET`.

**Основные команды:**
- `ORDER BY столбец [ASC|DESC]` — сортировка по указанному столбцу.
  - `ASC` — по возрастанию (по умолчанию).
  - `DESC` — по убыванию.
- `LIMIT N` — ограничить результат первыми N строками.
- `OFFSET M` — пропустить первые M строк (часто используется с `LIMIT` для постраничного вывода).

---

### **2. Практическая часть**

**Цель:** Научиться сортировать данные и ограничивать количество выводимых строк.

#### **Шаг 1: Подготовка — открытие базы данных**
1. Запустите **SQLite Studio**.
2. Убедитесь, что открыта база `students.db`.
3. Проверьте, что таблицы `Students` и `Teachers` содержат данные.

#### **Шаг 2: Сортировка по возрасту (по возрастанию)**
1. Перейдите во вкладку **"SQL"**.
2. Введите запрос:
```sql
SELECT * FROM Students ORDER BY age;
```
3. Выполните. Результат: студенты отсортированы от младшего к старшему.

> Примечание: `ASC` можно не указывать — это значение по умолчанию.

#### **Шаг 3: Сортировка по убыванию**
1. Измените запрос:
```sql
SELECT name, age FROM Students ORDER BY age DESC;
```
2. Результат: сначала идут самые старшие студенты.

#### **Шаг 4: Сортировка по текстовому полю**
1. Отсортируйте студентов по имени в алфавитном порядке:
```sql
SELECT name, group_name FROM Students ORDER BY name ASC;
```
2. Убедитесь, что имена идут от А к Я.

#### **Шаг 5: Сортировка по нескольким полям**
1. Иногда нужно сортировать по двум критериям. Например: сначала по группе, а внутри группы — по возрасту:
```sql
SELECT * FROM Students 
ORDER BY group_name ASC, age DESC;
```
2. Объяснение: сначала все из ИТ-101, потом ИТ-102 и т.д., а в каждой группе — от старшего к младшему.

#### **Шаг 6: Ограничение количества результатов (LIMIT)**
1. Выведите только **двух самых старших** студентов:
```sql
SELECT * FROM Students 
ORDER BY age DESC 
LIMIT 2;
```
2. Результат: только 2 строки, даже если в таблице больше студентов.

#### **Шаг 7: Пропуск строк (OFFSET)**
1. Пропустите первых 2 студентов и покажите следующих 2:
```sql
SELECT * FROM Students 
ORDER BY age DESC 
LIMIT 2 OFFSET 2;
```
2. Это полезно, например, при постраничном выводе: 1-я страница — LIMIT 2 OFFSET 0, 2-я — LIMIT 2 OFFSET 2 и т.д.

#### **Шаг 8: Комбинирование всех условий**
1. Найдите студентов из группы ИТ-101, отсортируйте их по имени, пропустите первого и покажите следующих двух:
```sql
SELECT * FROM Students 
WHERE group_name = 'ИТ-101'
ORDER BY name 
LIMIT 2 OFFSET 1;
```
2. Проверьте результат.

---

### **3. Самостоятельная часть**

> Выполняется самостоятельно.

1. Выведите **имя и возраст** трёх самых молодых студентов, отсортировав их по возрасту (от младшего к старшему).

2. Найдите всех преподавателей, отсортируйте их по **стажу по убыванию**, и покажите только **первого** (самого опытного).

3. Выведите список студентов, упорядоченный по группе (ASC), а внутри группы — по имени (DESC). Ограничьте результат **4 строками**.

---

### **4. Контрольные вопросы**

1. Как указать, что сортировка должна быть по убыванию?  
2. Для чего используется `OFFSET`? Приведите пример его применения.

> Ответы дайте устно при защите работы.

---

### **5. Слепая печать**

1. Перейдите на сайт [stamina-online](https://stamina-online.com/ru/programming)
2. Пройдите два урока по [языку программирования SQL](https://stamina-online.com/ru/workout/programming/18)

---

### **6. Критерии оценивания**

| Критерий                  | Оценка | Примечание |
|---------------------------|--------|------------|
| Практическая часть        | 3      | Все запросы с сортировкой и LIMIT выполнены корректно |
| Слепая печать             | 4      | Работа выполнена |
| Самостоятельная часть     | 5      | Запросы составлены правильно, используются ORDER BY, LIMIT, OFFSET, синтаксис соблюдён |
