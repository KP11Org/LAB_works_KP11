# **Лабораторная работа №4: Сообщения и взаимодействие между спрайтами**

## **Теория**

В Scratch спрайты могут **общаться между собой** с помощью **сообщений** — это как "радиосвязь" в программе. Один спрайт может отправить сообщение, а другой — его получить и выполнить определённые действия.

Сообщения особенно полезны:
- Для запуска действий у других спрайтов (например, "Игра окончена").
- Для синхронизации событий (например, "Начать уровень").
- Для обмена информацией между объектами.

Блоки для работы с сообщениями находятся в категории **"События"**:
- `отправить [сообщение]` — отправляет сигнал.
- `отправить [сообщение] и ждать` — ждёт, пока все спрайты обработают сообщение.
- `когда я получаю [сообщение]` — реагирует на полученное сообщение.

Сообщения нужно **создавать** — Scratch предложит ввести имя (например, "Победа", "Потерял жизнь").

---

## **Практическая часть**

**Цель:** Создать мини-игру, где игрок собирает монеты, и при достижении определённого количества запускается "праздник" — танец всех спрайтов.

### **Шаг 1: Создайте новый проект**
1. Перейдите на [https://scratch.mit.edu](https://scratch.mit.edu) → "Создать".
2. Удалите стандартного кота.
3. Добавьте спрайт игрока: например, **"Robot"**.

### **Шаг 2: Создайте переменную "Очки"**
1. В категории **"Переменные"** нажмите **"Создать переменную"**.
2. Назовите: `Очки`.
3. Выберите **"Для всех спрайтов"** → OK.

### **Шаг 3: Настройте управление игроком**
1. Добавьте в скрипт **робота**:
   - `когда щёлкнут по зелёному флагу`
   - `установить [Очки] в 0`
   - `всегда`
     - `если <клавиша [стрелка влево] нажата?> то`
       - `изменить x на -5`
     - `конец`
     - `...` (аналогично для всех стрелок)
   - `конец`

### **Шаг 4: Создайте монету**
1. Добавьте спрайт **"Star"**.
2. В его скриптах:
   - `когда щёлкнут по зелёному флагу`
   - `всегда`
     - `если касается [Robot] то`
       - `изменить [Очки] на 1`
       - `отправить [монета собрана]`
       - `идти в случайное место`
     - `конец`
   - `конец`

> Мы отправляем сообщение **"монета собрана"** при сборе звезды.

### **Шаг 5: Создайте второго персонажа — "Танцора"**
1. Добавьте спрайт, например, **"Dinosaur"**.
2. Спрячьте его сначала:
   - `когда щёлкнут по зелёному флагу`
   - `скрыть`

### **Шаг 6: Заставьте динозавра появляться при получении сообщения**
1. Добавьте:
   - `когда я получаю [монета собрана]`
   - `увеличить размер на 1`
   - `если <размер > 100> то`
     - `показать`
   - `конец`

> Пока не работает идеально — сделаем лучше.

### **Шаг 7: Отправьте сообщение "Победа!" при 5 очках**
1. Вернитесь к скрипту **робота**.
2. Внутрь `всегда` добавьте:
   - `если <(Очки) = [5]> то`
     - `отправить [Победа!]`
   - `конец`

> При достижении 5 очков будет отправлено сообщение "Победа!".

### **Шаг 8: Настройте реакцию на "Победа!"**
1. Перейдите к **динозавру**.
2. Добавьте:
   - `когда я получаю [Победа!]`
   - `показать`
   - `включить эффект [вихрь] на 25`
   - `повторить 10 раз`
     - `повернуться вправо на 36 градусов`
     - `ждать 0.1 секунды`
   - `конец`
   - `сказать "Ура! Ты выиграл!" на 3 секунды`

### **Шаг 9: Добавьте фон и музыку**
1. Выберите фон: например, **"Party"**.
2. Импортируйте звук: **"Dance Around"**.
3. В скрипт **робота** добавьте:
   - `когда я получаю [Победа!]`
   - `воспроизвести звук [Dance Around]`

### **Шаг 10: Сохраните проект**
1. Нажмите **"Файл" → "Сохранить как"**.
2. Назовите: **"ЛР4_Сообщения_и_танцы"**.

---

## **Самостоятельная часть**

1. **Задание 1:** Добавьте **ещё одного спрайта** (например, летающую тарелку). При получении сообщения **"Победа!"** он должен появляться на сцене и двигаться по кругу 5 секунд.

2. **Задание 2:** Сделайте так, чтобы при сборе **каждой третьей монеты** (3, 6, 9...) отправлялось сообщение **"Бонус!"**, и все спрайты на 1 секунду меняли цвет.

> Подсказка: используйте `остаток от деления` в блоке **"Операторы"**:  
> `если <((Очки) mod (3)) = [0]> то`

---

## **Контрольные вопросы**

1. Чем отличается блок `отправить и ждать` от `отправить`?
2. Как создать новое сообщение в Scratch?

> *Ответы должны быть даны устно преподавателю.*

---

## **Слепая печать**

1. Перейдите на сайт [https://stamina-online.com/ru/programming](https://stamina-online.com/ru/programming)
2. Пройдите два урока по [Частотные словари](https://stamina-online.com/ru/workout/dictionary/38)

---

## **Критерии оценивания**

| Критерий                     | Оценка |
|-----------------------------|--------|
| Выполнена практическая часть | **3** |
| Выполнен пункт "Слепая печать" | **4** |
| Выполнены оба задания самостоятельной части | **5** |

> *Оценка "5" ставится при условии, что бонус-сообщение срабатывает только на 3, 6, 9... и третий спрайт корректно реагирует на "Победа!".*
